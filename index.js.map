{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '46968352-3644d680d7f4886b7770d091e';\n\nexport default async function pixabayAPI(value, page = 1, per_page = 20) {\n  const params = new URLSearchParams({\n    key: API_KEY,\n    q: value,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n    page,\n    per_page,\n  });\n\n  const { data } = await axios(`https://pixabay.com/api/?${params}`);\n  return data;\n}\n","export default function renderFunction(arr) {\n  return arr\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `<li class=\"gallery-card\">\n      <a class=\"card-link\" href=\"${largeImageURL}\">\n    <img class=\"card-image\" src=\"${webformatURL}\" alt=\"${tags}\"/>\n    </a>\n    <ul class=\"card-info\">\n    <li class=\"params-item-value\"><h2 class=\"textBold\">Likes</h2> <p class=\"amount\">${likes}</p></li>\n    <li class=\"params-item-value\"><h2 class=\"textBold\">Views</h2> <p class=\"amount\">${views}</p></li>\n    <li class=\"params-item-value\"><h2 class=\"textBold\">Comments</h2> <p class=\"amount\">${comments}</p></li>\n    <li class=\"params-item-value\"><h2 class=\"textBold\">Downloads</h2> <p class=\"amount\">${downloads}</p></li>\n    </ul>\n    </li> `\n    )\n    .join('');\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport pixabayAPI from './js/pixabay-api';\nimport renderFunction from './js/render-functions';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst gallery = document.querySelector('.gallery');\nconst form = document.querySelector('.form-container');\nconst loader = document.querySelector('.loader');\nconst loadBtn = document.querySelector('.load-btn');\n\nconst iziToastStyles = {\n  titleColor: '#fff',\n  titleSize: '16px',\n  titleLineHeight: '1.5',\n  messageColor: '#fff',\n  messageSize: '16px',\n  messageLineHeight: '1.5',\n  backgroundColor: '#ef4040',\n  icon: 'ico-warning',\n  iconColor: '#fff',\n  iconUrl: '../img/bi_x-octagon.svg',\n  close: false,\n};\n\nform.addEventListener('submit', handleSearch);\nloadBtn.addEventListener('click', onLoadBtn);\n\nlet page = 1;\nconst perPage = 15;\nlet inputValue;\n\nhideElement(loadBtn);\n\nasync function handleSearch(event) {\n  event.preventDefault();\n\n  inputValue = event.currentTarget.elements.query.value.trim();\n\n  if (inputValue === '') {\n    return;\n  }\n  gallery.innerHTML = '';\n  showElement(loader);\n  page = 1;\n  try {\n    const data = await pixabayAPI(inputValue, page, perPage);\n\n    if (inputValue.includes(' ')) {\n      iziToast.info({\n        message: 'Query should not contain spaces.',\n        ...iziToastStyles,\n      });\n      hideElement(loadBtn);\n      return;\n    }\n\n    if (data.hits.length === 0) {\n      iziToast.info({\n        message: 'Photos not found, try another query',\n        ...iziToastStyles,\n      });\n      hideElement(gallery);\n      hideElement(loadBtn);\n      return;\n    }\n\n    form.reset();\n    gallery.innerHTML = renderFunction(data.hits);\n\n    if (page * perPage >= data.totalHits) {\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n      hideElement(loadBtn);\n    } else {\n      showElement(loadBtn);\n    }\n    lightbox.refresh();\n  } catch (error) {\n    iziToast.error({ message: 'Something went wrong', ...iziToastStyles });\n  } finally {\n    hideElement(loader);\n  }\n}\n\nasync function onLoadBtn() {\n  page += 1;\n  loadBtn.disabled = true;\n\n  try {\n    const data = await pixabayAPI(inputValue, page, perPage);\n    console.log(data);\n    gallery.insertAdjacentHTML('beforeend', renderFunction(data.hits));\n    lightbox.refresh();\n    if (page * perPage >= data.totalHits) {\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n      hideElement(loadBtn);\n    } else {\n      showElement(loadBtn);\n    }\n\n    const card = document.querySelector('.gallery-card');\n    const cardHeight = card.getBoundingClientRect().height;\n    window.scrollBy({\n      left: 0,\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n  } catch (error) {\n    iziToast.error({ message: 'Something went wrong' });\n  } finally {\n    loadBtn.disabled = false;\n  }\n}\n\nlet lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nfunction showElement(element) {\n  element.classList.remove('hidden');\n}\n\nfunction hideElement(element) {\n  element.classList.add('hidden');\n}\n"],"names":["API_KEY","pixabayAPI","value","page","per_page","params","data","axios","renderFunction","arr","webformatURL","largeImageURL","tags","likes","views","comments","downloads","gallery","form","loader","loadBtn","iziToastStyles","handleSearch","onLoadBtn","perPage","inputValue","hideElement","event","showElement","iziToast","lightbox","cardHeight","SimpleLightbox","element"],"mappings":"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"}